<%- include("partials/header.ejs") %>
<div class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary">
    <div class="col-lg-12 px-0">
      <p><b>CATEGORY:</b> WORLD</p>
      <h1 class="display-8 fst-italic">Canada reaches settlement with Michael Spavor over detention in China</h1>
      <div class="lead my-3"><img src="images/world1.avif" alt="image_of_people" class="img1"></div>
      <p class="lead mb-0"><a href="firstStatic.html" class="text-body-emphasis fw-bold linker">Continue reading...</a></p>
    </div>
</div>


<% const allPosts = []; %>
<% Object.keys(preview).forEach(category => { %>
  
  <%preview[category].forEach(post => { %>
    <% allPosts.push({ ...post}); %>
    <% }); %>
    <% }); %>
    

    <% allPosts.sort((a, b) => new Date(b.date) - new Date(a.date)) %>
 
    
    <% const previewPost = allPosts.slice(0, 4) %>

    
<div class="post-grid">
  <% const firstTwoPosts = previewPost.slice(0, 2); %>
    <% firstTwoPosts.forEach((post, index) => { %>
      <div class="post-div" data-divIndex="<%= index + 1 %>">
        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
          <strong class="d-inline-block mb-2 text-primary-emphasis"><%= post.category %></strong>
          <h3 class="mb-0"><%= post.heading %></h3>
          <div class="mb-1 text-body-secondary"><%= post.date %></div>
          <p class="mb-auto"> <%= post.postInformant %> </p>
          <a href="/displayContinue?id=<%= post.id%>" class="icon-link gap-1 icon-link-hover stretched-link"> Continue reading </a>
        </div>
        <div class="col-auto d-lg-block">
          <img src="data:<%= post.mime%>; base64, <%= post.image %>" alt="uploaded image for <%=post.category%>"
            class="bd-placeholder-img" width="200" height="250" 
            aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">         
        </div>  
      </div>
    </div>
  <% }); %>
 

  <div class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary">
    <div class="col-lg-12 px-0">
      <p><b>CATEGORY:</b> TECHNOLOGY</p>
      <h1 class="display-8 fst-italic">The AI Revolution and what it means for local news</h1>
      <div class="lead my-3"><img src="images/tech1.png" alt="image_of_artificial intelligence" class="img1"></div>
      <p class="lead mb-0"><a href="secondStatic.html" class="text-body-emphasis fw-bold linker">Continue reading...</a></p>
    </div>
    </div>

    <% const lastTwoPosts = previewPost.slice(2, 4); %>
    <% lastTwoPosts.forEach((post, index) => { %>
    <div class="post-div" data-divIndex="<%= index + 3 %>">
      <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
          <strong class="d-inline-block mb-2 text-primary-emphasis"><%= post.category %></strong>
          <h3 class="mb-0"><%= post.heading %></h3>
          <div class="mb-1 text-body-secondary"><%= post.date %></div>
          <p class="mb-auto"> <%= post.postInformant %> </p>
          <a href="/displayContinue?id=<%=post.id%> class="icon-link gap-1 icon-link-hover stretched-link"> Continue reading </a>
        </div>
        <div class="col-auto d-lg-block">
          <img src="data:<%= post.mime%>; base64, <%= post.image %>" alt="Maybe an image talking about <%=post.category%>"
            class="bd-placeholder-img" width="200" height="250" 
            aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">         
        </div>  
      </div>
      
    <% }); %>    
  </div>
</div>


<div class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary static">
  <div class="col-lg-12 px-0">
    <p><b>CATEGORY:</b> DESIGN</p>
    <h1 class="display-8 fst-italic">Japan's Riken Yamamoto wins 2024 Pritzker Architecture Prize</h1>
    <div class="lead my-3"><img src="images/design1.webp" alt="image_of_a_person" class="img1"></div>
    <p class="lead mb-0"><a href="thirdStatic" class="text-body-emphasis fw-bold linker">Continue reading...</a></p>
  </div>
</div>




<script>
  document.addEventListener("DOMContentLoaded", function () {
    const posts = document.querySelectorAll(".post-div");

    posts.forEach(post => {
      const divIndex = post.getAttribute("data-divIndex");

      
      if (divIndex > 0) {
        post.style.display = "block";
      } else {
        post.style.display = "none";
      }
    });    
  });
</script>



<%- include("partials/footer.ejs") %>